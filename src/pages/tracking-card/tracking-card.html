<!--
  Generated template for the TrackingCardPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar>
    <button ion-button menuToggle>
        <ion-icon name="menu"></ion-icon>
      </button>
    <ion-title>Tarjeta de seguimiento</ion-title>
  </ion-navbar>
</ion-header>

<!-- *ngIf="requestAngelModel.status" -->
<ion-content class="schedule-content">

  <ion-segment class="schedule-segment">
    SEGUIMIENTO SOLICITUD
  </ion-segment>

  <ion-segment class="schedule-segment" *ngIf="requestAngelModel">
    <ion-img width="100" height="100" src="{{ url }}..{{requestAngelModel.sponsor?.logo}}"></ion-img>
  </ion-segment>

  <ion-list class="schedule-list" *ngIf="requestAngelModel.status">

    <ion-item class="schedule-item" *ngIf="requestAngelModel.bike_angel">
      <ion-row class="schedule-data">
        <ion-col width-20>
          <ion-icon class="description-icon" name="person"></ion-icon>
        </ion-col>
        <ion-col width-80>
          <div class="data-item">
            <div class="item-content">
              <h2 class="item-title one-line">Nombre del biciangel</h2>
              <div class="item-description">
                <p class="description-text">{{ requestAngelModel.bike_angel?.user.first_name }} {{ requestAngelModel.bike_angel?.user.second_name }}
                  {{ requestAngelModel.bike_angel?.user.last_name }} </p>
              </div>
            </div>
          </div>
        </ion-col>
      </ion-row>
    </ion-item>


    <ion-item class="schedule-item">
      <ion-row class="schedule-data">
        <ion-col width-20>
          <ion-icon class="description-icon" name="calendar"></ion-icon>
        </ion-col>
        <ion-col width-80>
          <div class="data-item">
            <div class="item-content">
              <h2 class="item-title one-line">Fecha de acompañamiento</h2>
              <div class="item-description">
                <p class="description-text">{{ requestAngelModel?.take_date | date: 'dd/MM/yyyy' }}</p>
              </div>
            </div>
          </div>
        </ion-col>
      </ion-row>
    </ion-item>


    <ion-item class="schedule-item">
      <ion-row class="schedule-data">
        <ion-col width-20>
          <ion-icon class="description-icon" name="time"></ion-icon>
        </ion-col>
        <ion-col width-80>
          <div class="data-item">
            <div class="item-content">
              <h2 class="item-title one-line">Lugar de salida</h2>
              <div class="item-description">
                <p class="description-text">{{ requestAngelModel?.time_start | date: 'h:mm a' }}</p>
              </div>
            </div>
          </div>
        </ion-col>
      </ion-row>
    </ion-item>

    <ion-item class="schedule-item">
      <ion-row class="schedule-data">
        <ion-col width-20>
          <ion-icon class="description-icon" name="pin"></ion-icon>
        </ion-col>
        <ion-col width-80>
          <div class="data-item">
            <div class="item-content">
              <h2 class="item-title one-line">Dirección de salida</h2>
              <div class="item-description">
                <p class="description-text">{{ requestAngelModel.address_start }}</p>
              </div>
            </div>
          </div>
        </ion-col>
      </ion-row>
    </ion-item>


    <ion-item class="schedule-item">
      <ion-row class="schedule-data">
        <ion-col width-20>
          <ion-icon class="description-icon" name="pin"></ion-icon>
        </ion-col>
        <ion-col width-80>
          <div class="data-item">
            <div class="item-content">
              <h2 class="item-title one-line">Lugar de llegada</h2>
              <div class="item-description">
                <p class="description-text">{{ requestAngelModel.address_finish }}</p>
              </div>
            </div>
          </div>
        </ion-col>
      </ion-row>
    </ion-item>


    <ion-item class="schedule-item" *ngIf="requestAngelModel.bike_angel">
      <ion-row class="schedule-data">
        <ion-col width-20>
          <ion-icon class="description-icon" name="call"></ion-icon>
        </ion-col>
        <ion-col width-80>
          <div class="data-item">
            <div class="item-content">
              <h2 class="item-title one-line">Teléfono del biciángel</h2>
              <div class="item-description">
                <p class="description-text">{{ requestAngelModel.bike_angel?.user.mobile }}</p>
              </div>
            </div>
          </div>
        </ion-col>
      </ion-row>
    </ion-item>

    <section *ngIf="isEnableDescription" class="form-section" style="margin-bottom:30px">
      <ion-item>
        <ion-textarea rows="7" [(ngModel)]="requestAngelModel.observationCancel" placeholder="Motivo de cancelación"></ion-textarea>
      </ion-item>
      <button ion-button full [disabled]="!requestAngelModel.observationCancel || !btnSend" class="button-danger" (click)="cancelRequest()">Enviar cancelación</button>
    </section>

    <ion-segment class="schedule-segment sample-form" style="margin-top:25px">
      <section class="form-section">
        <button class="button-primary" ion-button full (click)="editRequest(requestAngelModel.id)">Editar solicitud</button>
        <button class="button-danger" ion-button full (click)="enableDescription()">Cancelar solicitud</button>
      </section>
    </ion-segment>

  </ion-list>

</ion-content>